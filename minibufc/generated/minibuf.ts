// Generated by minibufc

const floatPrecision = 3;

export interface Vector {
  x: number;
  y: number;
  z: number;
}

export interface Config {
  auto_restart: boolean;
  id: number;
  user_name: string;
  score: number;
}

export interface Govt {
  minister_count: number;
  president_name: string;
  president_term: number;
  prime_minister_name: string;
  vote_count: number;
}

export function VectorParse(str: string): Vector {
  const start = str.indexOf('[');
  if (start === -1) throw new Error('Invalid format');
  const end = str.indexOf(']', start);
  if (end === -1) throw new Error('Invalid format');
  const count = parseInt(str.slice(start + 1, end));
  const values = str.slice(end + 1).split(';');
  const result: Vector = {
    x: 0.0,
    y: 0.0,
    z: 0.0,
  };
  for (let i = 0; i < Math.min(count, values.length); i++) {
    if (i === 0) {
      result.x = parseFloat(values[i]);
    }
    if (i === 1) {
      result.y = parseFloat(values[i]);
    }
    if (i === 2) {
      result.z = parseFloat(values[i]);
    }
  }
  return result;
}

export function VectorSerialize(obj: Vector): string {
  const count = 3;
  let str = `[${count}]`;
  str += `${obj.x.toFixed(floatPrecision)}`;
  str += ';';
  str += `${obj.y.toFixed(floatPrecision)}`;
  str += ';';
  str += `${obj.z.toFixed(floatPrecision)}`;
  return str;
}

export function ConfigParse(str: string): Config {
  const start = str.indexOf('[');
  if (start === -1) throw new Error('Invalid format');
  const end = str.indexOf(']', start);
  if (end === -1) throw new Error('Invalid format');
  const count = parseInt(str.slice(start + 1, end));
  const values = str.slice(end + 1).split(';');
  const result: Config = {
    auto_restart: false,
    id: 0,
    user_name: '',
    score: 6000.000,
  };
  for (let i = 0; i < Math.min(count, values.length); i++) {
    if (i === 0) {
      result.auto_restart = values[i] === 'T';
    }
    if (i === 1) {
      result.id = parseInt(values[i]);
    }
    if (i === 2) {
      result.user_name = values[i];
    }
    if (i === 3) {
      result.score = parseFloat(values[i]);
    }
  }
  return result;
}

export function ConfigSerialize(obj: Config): string {
  const count = 4;
  let str = `[${count}]`;
  str += `${obj.auto_restart ? 'T' : 'F'}`;
  str += ';';
  str += `${obj.id}`;
  str += ';';
  str += `${obj.user_name}`;
  str += ';';
  str += `${obj.score.toFixed(floatPrecision)}`;
  return str;
}

export function GovtParse(str: string): Govt {
  const start = str.indexOf('[');
  if (start === -1) throw new Error('Invalid format');
  const end = str.indexOf(']', start);
  if (end === -1) throw new Error('Invalid format');
  const count = parseInt(str.slice(start + 1, end));
  const values = str.slice(end + 1).split(';');
  const result: Govt = {
    minister_count: 0,
    president_name: '',
    president_term: 0,
    prime_minister_name: '',
    vote_count: 0.0,
  };
  for (let i = 0; i < Math.min(count, values.length); i++) {
    if (i === 0) {
      result.minister_count = parseInt(values[i]);
    }
    if (i === 1) {
      result.president_name = values[i];
    }
    if (i === 2) {
      result.president_term = parseInt(values[i]);
    }
    if (i === 3) {
      result.prime_minister_name = values[i];
    }
    if (i === 4) {
      result.vote_count = parseFloat(values[i]);
    }
  }
  return result;
}

export function GovtSerialize(obj: Govt): string {
  const count = 5;
  let str = `[${count}]`;
  str += `${obj.minister_count}`;
  str += ';';
  str += `${obj.president_name}`;
  str += ';';
  str += `${obj.president_term}`;
  str += ';';
  str += `${obj.prime_minister_name}`;
  str += ';';
  str += `${obj.vote_count.toFixed(floatPrecision)}`;
  return str;
}

